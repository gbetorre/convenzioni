<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0"
  xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  
    <display-name>Convenzioni On Line</display-name>
    
    <servlet>
      <description>Servlet COL entrypoint</description>        
      <servlet-name>main</servlet-name>
      <servlet-class>it.col.Main</servlet-class>
      <load-on-startup>5</load-on-startup>
    </servlet>
    <servlet-mapping>
      <servlet-name>main</servlet-name>
      <url-pattern>/</url-pattern>
    </servlet-mapping>
   
    <servlet>
      <description>Servlet to manage XHR requests and output other than text/html</description>
      <servlet-name>data</servlet-name>
      <servlet-class>it.col.Data</servlet-class>
      <load-on-startup>10</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>data</servlet-name>
        <url-pattern>/data</url-pattern>
    </servlet-mapping>  
   
    <servlet>
      <description>Servlet to manage user sessions</description>
      <servlet-name>session</servlet-name>
      <servlet-class>it.col.SessionManager</servlet-class>
    </servlet>
    <servlet-mapping>
      <servlet-name>session</servlet-name>
      <url-pattern>/auth</url-pattern>
    </servlet-mapping>

    <servlet>
      <description>Servlet to cache configuration variables</description>        
      <servlet-name>config</servlet-name>
      <servlet-class>it.col.ConfigManager</servlet-class>
      <load-on-startup>2</load-on-startup>
    </servlet>
    
    <servlet>
      <description>Servlet to provide database connection</description>        
      <servlet-name>db</servlet-name>
      <servlet-class>it.col.db.DBManager</servlet-class>
      <load-on-startup>1</load-on-startup>
    </servlet>

   <!-- Note: Contex Params -->

    <context-param>
        <description>Pagina di errore a cui redirigere in caso venga sollevata un'eccezione</description>
        <param-name>errorJsp</param-name>
        <param-value>/error.jsp</param-value>
    </context-param>

    <context-param>
        <description></description>
        <param-name>home</param-name>
        <param-value>home</param-value>
    </context-param>

    <context-param>
        <description>Assembla tutte le pagine</description>
        <param-name>templateJsp</param-name>
        <param-value>/template.jsp</param-value>
    </context-param>

    <context-param>
        <description>Parametro che identifica la Command per gestire la richiesta</description>
        <param-name>entToken</param-name>
        <param-value>q</param-value>
    </context-param>

    <context-param>
        <description>Parametro che identifica il formato di output richiesto</description>
        <param-name>outToken</param-name>
        <param-value>out</param-value>
    </context-param>
    
    <context-param>
        <description>Parametro che identifica l'entit√† su cui agire</description>
        <param-name>objToken</param-name>
        <param-value>o</param-value>
    </context-param>
    
    <context-param>
        <description>Directory fogli stile</description>
        <param-name>urlDirectoryStili</param-name>
        <param-value>assets/css/</param-value>
    </context-param>
    
    <context-param>
        <description>Directory script client</description>
        <param-name>urlDirectoryScript</param-name>
        <param-value>assets/js/</param-value>
    </context-param>
    
    <context-param>
        <description>Directory immagini</description>
        <param-name>urlDirectoryImmagini</param-name>
        <param-value>assets/images/</param-value>
    </context-param>
    
    <context-param>
        <description>Root dell'applicazione</description>
        <param-name>appName</param-name>
        <param-value>/col</param-value>
    </context-param>

    <resource-ref>
        <description>
            Resource reference to a factory for java.sql.Connection
            instances that may be used for talking to a particular
            database that is configured in the context.xml file.
        </description>
        <res-ref-name>
            jdbc/coldev
        </res-ref-name>
        <res-type>
            javax.sql.DataSource
        </res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
    
    <resource-ref>
        <description>
            Resource reference to a factory for java.sql.Connection
            instances that may be used for talking to a particular
            database that is configured in the context.xml file.
        </description>
        <res-ref-name>
            jdbc/col
        </res-ref-name>
        <res-type>
            javax.sql.DataSource
        </res-type>
        <res-auth>Container</res-auth>
    </resource-ref>

</web-app>
